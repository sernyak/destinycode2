<!DOCTYPE html><html lang="uk"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">    <title>New Version - Step 4</title>    <script src="https://cdn.tailwindcss.com"></script>    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">        <style>        /* --- –ù–û–í–Ü –°–¢–ò–õ–Ü (–∑ —Ñ–∞–π–ª—É 12-15) --- */        :root {            /* –ù–æ–≤–∏–π —Ç–µ–º–Ω—ñ—à–∏–π —Ñ–æ–Ω */            --bg-color: #0f1115;            --primary-text-color: #e0e0e0;            --secondary-text-color: #a0a0a0;            --accent-color: #cda45e;            --card-bg-color: #161b22;            --border-color: #333333;            --error-color: #ef4444;        }        body {            font-family: 'Montserrat', sans-serif;            background-color: var(--bg-color);            color: var(--primary-text-color);            min-height: 100vh;            display: flex;            align-items: center;            justify-content: center;            -webkit-tap-highlight-color: transparent;        }        .funnel-step {            width: 100%;            max-width: 480px;            padding: 20px;        }        /* –ù–æ–≤–∏–π Input Style */        .input-field {            position: relative;            color: var(--primary-text-color);            padding: 1rem;            border: 1px solid var(--border-color);            background-color: var(--card-bg-color);            /* –ù–æ–≤–∏–π —Ä–∞–¥—ñ—É—Å */            border-radius: 0.75rem;             width: 100%;            font-size: 1rem;            transition: border-color 0.2s ease, box-shadow 0.2s ease;        }        .input-field:focus, .input-field:focus-within {            outline: none;            box-shadow: 0 0 0 2px var(--accent-color);            border-color: var(--accent-color);        }        .input-field.input-error {            border-color: var(--error-color) !important;            box-shadow: 0 0 0 2px var(--error-color) !important;        }                .error-text {            color: var(--error-color);            font-size: 0.875rem;            margin-top: 0.5rem;            display: none;        }                .info-text {            color: var(--accent-color);            font-size: 0.875rem;            text-align: center;            display: none;            margin-top: 0.5rem;        }        /* –ö–Ω–æ–ø–∫–∏ */        .btn {            width: 100%;            font-weight: 700;            border-radius: 0.75rem; /* –ù–æ–≤–∏–π —Ä–∞–¥—ñ—É—Å */            padding: 1rem;            font-size: 1rem;            transition: all 0.3s ease;            cursor: pointer;            position: relative;            display: flex;            align-items: center;            justify-content: center;        }                /* Premium Gradient Button */        .btn-primary {            background: linear-gradient(135deg, #cda45e 0%, #a87e38 100%);            color: #0f1115;            box-shadow: 0 4px 20px -5px rgba(205, 164, 94, 0.4);            border: none;        }                .btn-primary:not(:disabled):hover {            opacity: 0.95;            box-shadow: 0 6px 25px -5px rgba(205, 164, 94, 0.5);            transform: translateY(-1px);        }        .btn-skip {            background: none;            border: none;            color: var(--secondary-text-color);            font-size: 0.9rem;            font-weight: 500;        }                /* –°–ø—ñ–Ω–µ—Ä */        .btn-spinner {            display: none;            width: 24px;            height: 24px;            border: 2px solid rgba(255, 255, 255, 0.3);            border-top-color: #ffffff; /* –£–≤–∞–≥–∞: –Ω–∞ –∑–æ–ª–æ—Ç—ñ–π –∫–Ω–æ–ø—Ü—ñ —Ç—Ä–µ–±–∞ —Ç–µ–º–Ω–∏–π —Å–ø—ñ–Ω–µ—Ä, –∞–ª–µ —Ç—É—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç */            border-radius: 50%;            animation: spin 0.8s linear infinite;        }                /* FIX: –û—Å–∫—ñ–ª—å–∫–∏ –∫–Ω–æ–ø–∫–∞ —Ç–µ–º–Ω–∞ (—Ç–µ–∫—Å—Ç), –∑—Ä–æ–±–∏–º–æ —Å–ø—ñ–Ω–µ—Ä —Ç–µ–º–Ω–∏–º */        .btn-primary .btn-spinner {             border-top-color: #000;             border-color: rgba(0,0,0,0.3);        }        .btn.loading .btn-text { opacity: 0; visibility: hidden; }        .btn.loading .btn-spinner { display: block; position: absolute; }        @keyframes spin { to { transform: rotate(360deg); } }    </style></head><body>    <!-- –ï–ö–†–ê–ù 4 (–ù–û–í–ê –í–ï–†–°–Ü–Ø) -->    <section id="premium-data-step" class="funnel-step space-y-6 text-center">        <h2 class="text-3xl font-bold text-white tracking-tight">            –û—Ç—Ä–∏–º–∞–π –ø–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ —Å–≤–æ—î—ó –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ        </h2>        <p class="text-lg" style="color: var(--secondary-text-color);">            –û–±–µ—Ä–∏ —á–∞—Å —Ç–∞ –º—ñ—Å—Ç–æ —Å–≤–æ–≥–æ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è —â–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –ø–æ–¥—Ä–æ–±–∏—Ü—ñ –≤—Å—ñ—Ö —Å—Ñ–µ—Ä —Å–≤–æ–≥–æ –∂–∏—Ç—Ç—è        </p>        <div id="premium-form-container" class="w-full space-y-5 mt-6">            <!-- TIME INPUT: iOS UX FIX -->            <div>               <!-- –õ–µ–π–±–ª —Å—Ç–∞–≤ –º–µ–Ω—à–∏–º —ñ uppercase, –∑–æ–ª–æ—Ç–∏–π -->               <label for="birth-time" class="block text-xs uppercase tracking-widest font-semibold text-left ml-1 mb-2" style="color: var(--accent-color);">–ß–∞—Å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è (–î–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –î–æ–ª—ñ)</label>                                <div class="input-field h-14 flex items-center justify-center relative hover:border-[#cda45e] transition-colors">                    <svg class="w-5 h-5 absolute right-4 top-1/2 -translate-y-1/2" style="color: var(--secondary-text-color);" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>                    </svg>                                        <!-- –í–ê–ñ–õ–ò–í–û: pointer-events: none –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ–∫–∞—Ç–∏ "–∫—Ä—ñ–∑—å" —Ç–µ–∫—Å—Ç -->                    <span id="time-placeholder" style="color: var(--secondary-text-color); pointer-events: none;">–û–±–µ—Ä–∏ —á–∞—Å</span>                                        <!-- –í–ê–ñ–õ–ò–í–û: z-10 —Å—Ç–∞–≤–∏—Ç—å —ñ–Ω–ø—É—Ç –ü–û–í–ï–†–• —Ç–µ–∫—Å—Ç—É -->                    <input type="time" id="birth-time" name="birth-time" class="absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer z-10">                </div>            </div>            <!-- CITY INPUT -->            <div>                <label for="birth-city" class="block text-xs uppercase tracking-widest font-semibold text-left ml-1 mb-2" style="color: var(--accent-color);">–ú—ñ—Å—Ç–æ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è (–î–ª—è –∫–∞—Ä—Ç–∏ –∑—ñ—Ä–æ–∫)</label>                <input type="text" id="birth-city" name="birth-city" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ö–∏—ó–≤" class="input-field text-center hover:border-[#cda45e] transition-colors">                                <p id="city-error-message" class="error-text">–¢–µ–∫—Å—Ç –ø–æ–º–∏–ª–∫–∏...</p>                <p id="city-info-message" class="info-text"></p>            </div>            <div class="pt-4 space-y-3">                <button type="button" id="continue-to-paywall-button" class="btn btn-primary !text-lg !py-4">                    <span class="btn-text">–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑</span>                    <span class="btn-spinner"></span>                </button>                <button type="button" id="skip-button" class="btn btn-skip">                    –Ø –Ω–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ —á–∞—Å—É (–°–∫–ª–∞—Å—Ç–∏ –∫–æ—Å–º–æ–≥—Ä–∞–º—É –±–µ–∑ –î–æ–º—ñ–≤)                </button>            </div>        </div>    </section>    <script>        // === JS –õ–û–ì–Ü–ö–ê (–ù–û–í–ê –í–ï–†–°–Ü–Ø) ===        const birthTimeInput = document.getElementById('birth-time');        const timePlaceholder = document.getElementById('time-placeholder');        const birthCityInput = document.getElementById('birth-city');        const cityErrorMessage = document.getElementById('city-error-message');        const cityInfoMessage = document.getElementById('city-info-message');        const continueBtn = document.getElementById('continue-to-paywall-button');        const skipBtn = document.getElementById('skip-button');        function updateTimePlaceholder() {            if (!birthTimeInput.value) {                timePlaceholder.innerText = '–û–±–µ—Ä–∏ —á–∞—Å';                timePlaceholder.style.color = 'var(--secondary-text-color)';            } else {                timePlaceholder.innerText = birthTimeInput.value;                timePlaceholder.style.color = 'var(--primary-text-color)';            }        }                // –°–ª—É—Ö–∞—á—ñ –ø–æ–¥—ñ–π (—è–∫ —É –Ω–æ–≤–æ–º—É —Ñ–∞–π–ª—ñ)        birthTimeInput.addEventListener('input', updateTimePlaceholder);        birthTimeInput.addEventListener('change', updateTimePlaceholder);                // –ï–º—É–ª—è—Ü—ñ—è Proxy API (–±–µ–∑–ø–µ—á–Ω—ñ—à–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)        async function mockNewProxyApiCall(city) {            return new Promise(resolve => {                setTimeout(() => {                    if (city.toLowerCase().includes('–∫–∏—ó–≤') || city.toLowerCase().includes('kyiv')) {                        resolve({ latitude: 50.45, longitude: 30.52, timezone: "Europe/Kyiv", corrected_name: "–ö–∏—ó–≤" });                    } else if (city.length < 3) {                         resolve({ error: "not_found" });                     } else {                        resolve({ latitude: 0, longitude: 0, timezone: "UTC", corrected_name: city });                    }                }, 1000); // –¢—Ä–æ—Ö–∏ —à–≤–∏–¥—à–µ            });        }        continueBtn.addEventListener('click', async () => {            const city = birthCityInput.value.trim();            cityErrorMessage.style.display = 'none';            cityInfoMessage.style.display = 'none';            birthCityInput.classList.remove('input-error');            if (city === '') {                console.log("Empty city -> Skip validation");                alert("–õ–æ–≥—ñ–∫–∞: –ú—ñ—Å—Ç–æ –ø—É—Å—Ç–µ -> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∫—Ä–æ–∫ (–ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ Paywall)");                return;            }            // UI Loading (—Å—É—á–∞—Å–Ω–∏–π)            continueBtn.classList.add('loading');            continueBtn.disabled = true;            // –ù–æ–≤–∞ –ª–æ–≥—ñ–∫–∞: –í–∏–∫–ª–∏–∫ Proxy API (–µ–º—É–ª—è—Ü—ñ—è)            const coords = await mockNewProxyApiCall(city);                        // –ê–≤—Ç–æ–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞–∑–≤–∏            let infoText = null;            if (coords && coords.corrected_name && city.toLowerCase() !== coords.corrected_name.toLowerCase()) {                infoText = `–ú–∏ —É—Ç–æ—á–Ω–∏–ª–∏: ${coords.corrected_name} üòâ`;            }            if (infoText) {                cityInfoMessage.innerText = infoText;                cityInfoMessage.style.display = 'block';            }            continueBtn.classList.remove('loading');            continueBtn.disabled = false;            if (coords.error) {                cityErrorMessage.innerText = "–ù–µ –º–æ–∂–µ–º–æ –∑–Ω–∞–π—Ç–∏ –º—ñ—Å—Ç–æ. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.";                cityErrorMessage.style.display = 'block';                birthCityInput.classList.add('input-error');            } else {                setTimeout(() => {                    alert("–£—Å–ø—ñ—Ö! –í–∞–ª—ñ–¥–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Proxy –ø—Ä–æ–π—à–ª–∞.");                }, infoText ? 1200 : 0);            }        });        skipBtn.addEventListener('click', () => {            alert("–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ (–°–∫–ª–∞—Å—Ç–∏ –∫–æ—Å–º–æ–≥—Ä–∞–º—É –±–µ–∑ –î–æ–º—ñ–≤)");        });                // Input cleanup styling        birthCityInput.addEventListener('input', () => {            cityErrorMessage.style.display = 'none';            cityInfoMessage.style.display = 'none';            birthCityInput.classList.remove('input-error');        });    </script></body></html>